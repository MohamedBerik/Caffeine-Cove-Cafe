{"ast":null,"code":"import _objectSpread from\"C:/React/Caffeine Cove/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useContext,useEffect,useState}from\"react\";import api from\"../services/axios\";import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const storedUser=localStorage.getItem(\"user\");const token=localStorage.getItem(\"token\");if(storedUser&&token){setUser(_objectSpread(_objectSpread({},JSON.parse(storedUser)),{},{token}));}setLoading(false);},[]);const login=(userData,token)=>{localStorage.setItem(\"token\",token);localStorage.setItem(\"user\",JSON.stringify(userData));setUser(_objectSpread(_objectSpread({},userData),{},{token}));};const logout=async()=>{try{await api.post(\"/logout\",{},{headers:{Authorization:\"Bearer \".concat(user.token)}});}catch(e){}localStorage.clear();setUser(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout,loading},children:children});}export const useAuth=()=>useContext(AuthContext);","map":{"version":3,"names":["createContext","useContext","useEffect","useState","api","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","loading","setLoading","storedUser","localStorage","getItem","token","_objectSpread","JSON","parse","login","userData","setItem","stringify","logout","post","headers","Authorization","concat","e","clear","Provider","value","useAuth"],"sources":["C:/React/Caffeine Cove/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport api from \"../services/axios\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem(\"user\");\r\n    const token = localStorage.getItem(\"token\");\r\n    if (storedUser && token) {\r\n      setUser({ ...JSON.parse(storedUser), token });\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const login = (userData, token) => {\r\n    localStorage.setItem(\"token\", token);\r\n    localStorage.setItem(\"user\", JSON.stringify(userData));\r\n    setUser({ ...userData, token });\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await api.post(\r\n        \"/logout\",\r\n        {},\r\n        { headers: { Authorization: `Bearer ${user.token}` } }\r\n      );\r\n    } catch (e) {}\r\n    localStorage.clear();\r\n    setUser(null);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, logout, loading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"2GAAA,OAASA,aAAa,CAAEC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACtE,MAAO,CAAAC,GAAG,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpC,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAQ,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,KAAM,CAAAC,KAAK,CAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,UAAU,EAAIG,KAAK,CAAE,CACvBN,OAAO,CAAAO,aAAA,CAAAA,aAAA,IAAMC,IAAI,CAACC,KAAK,CAACN,UAAU,CAAC,MAAEG,KAAK,EAAE,CAAC,CAC/C,CACAJ,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAQ,KAAK,CAAGA,CAACC,QAAQ,CAAEL,KAAK,GAAK,CACjCF,YAAY,CAACQ,OAAO,CAAC,OAAO,CAAEN,KAAK,CAAC,CACpCF,YAAY,CAACQ,OAAO,CAAC,MAAM,CAAEJ,IAAI,CAACK,SAAS,CAACF,QAAQ,CAAC,CAAC,CACtDX,OAAO,CAAAO,aAAA,CAAAA,aAAA,IAAMI,QAAQ,MAAEL,KAAK,EAAE,CAAC,CACjC,CAAC,CAED,KAAM,CAAAQ,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACF,KAAM,CAAAtB,GAAG,CAACuB,IAAI,CACZ,SAAS,CACT,CAAC,CAAC,CACF,CAAEC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYnB,IAAI,CAACO,KAAK,CAAG,CAAE,CACvD,CAAC,CACH,CAAE,MAAOa,CAAC,CAAE,CAAC,CACbf,YAAY,CAACgB,KAAK,CAAC,CAAC,CACpBpB,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAED,mBACEN,IAAA,CAACC,WAAW,CAAC0B,QAAQ,EAACC,KAAK,CAAE,CAAEvB,IAAI,CAAEW,KAAK,CAAEI,MAAM,CAAEb,OAAQ,CAAE,CAAAH,QAAA,CAC3DA,QAAQ,CACW,CAAC,CAE3B,CAEA,MAAO,MAAM,CAAAyB,OAAO,CAAGA,CAAA,GAAMlC,UAAU,CAACM,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}