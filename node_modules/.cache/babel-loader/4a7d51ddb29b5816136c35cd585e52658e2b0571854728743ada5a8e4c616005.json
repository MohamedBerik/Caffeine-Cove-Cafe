{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\Full Stack Web\\\\Front-End\\\\React Projects\\\\Caffeine Cove\\\\Caffeine Cove\\\\src\\\\pages\\\\admin\\\\Dashboard.jsx\",\n  _s = $RefreshSig$();\n// src/pages/admin/Dashboard.jsx\nimport { useEffect, useState, useCallback } from \"react\";\nimport { getAdminDashboard, deleteEntity } from \"../../services/adminApi\";\nimport { useConfirm } from \"../../hooks/useConfirm\";\nimport CrudModal from \"../../components/admin/CrudModal\";\nimport DashboardTable from \"../../components/admin/DashboardTable\";\nimport \"../../styles/dashboard.css\";\nimport Navbar from \"../../Home/Navbar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EMPTY = {\n  users: [],\n  categories: [],\n  products: [],\n  customers: [],\n  orders: [],\n  employees: [],\n  sales: [],\n  reservations: []\n};\nconst Dashboard = () => {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState({});\n  const [latest, setLatest] = useState(EMPTY);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [currentTable, setCurrentTable] = useState(\"\");\n  const [formData, setFormData] = useState({});\n  const {\n    confirm,\n    ConfirmModal\n  } = useConfirm();\n\n  // ================= FETCH =================\n  const fetchDashboard = useCallback(async () => {\n    try {\n      var _data$latest, _data$latest2, _data$latest3, _data$latest4, _data$latest5, _data$latest6, _data$latest7, _data$latest8;\n      setLoading(true);\n      const res = await getAdminDashboard();\n      const data = res.data || {};\n      setStats(data.statistics || {});\n      setLatest({\n        users: ((_data$latest = data.latest) === null || _data$latest === void 0 ? void 0 : _data$latest.users) || [],\n        categories: ((_data$latest2 = data.latest) === null || _data$latest2 === void 0 ? void 0 : _data$latest2.categories) || [],\n        products: ((_data$latest3 = data.latest) === null || _data$latest3 === void 0 ? void 0 : _data$latest3.products) || [],\n        customers: ((_data$latest4 = data.latest) === null || _data$latest4 === void 0 ? void 0 : _data$latest4.customers) || [],\n        orders: ((_data$latest5 = data.latest) === null || _data$latest5 === void 0 ? void 0 : _data$latest5.orders) || [],\n        employees: ((_data$latest6 = data.latest) === null || _data$latest6 === void 0 ? void 0 : _data$latest6.employees) || [],\n        sales: ((_data$latest7 = data.latest) === null || _data$latest7 === void 0 ? void 0 : _data$latest7.sales) || [],\n        reservations: ((_data$latest8 = data.latest) === null || _data$latest8 === void 0 ? void 0 : _data$latest8.reservations) || []\n      });\n    } catch (e) {\n      console.error(e);\n      setLatest(EMPTY);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    fetchDashboard();\n  }, [fetchDashboard]);\n\n  // ================= CRUD =================\n  const handleAdd = table => {\n    setCurrentTable(table);\n    setFormData({});\n    setModalOpen(true);\n  };\n  const handleEdit = (table, item) => {\n    setCurrentTable(table);\n    setFormData(item);\n    setModalOpen(true);\n  };\n  const handleDelete = async (table, id) => {\n    await confirm(async () => {\n      await deleteEntity(table, id);\n      fetchDashboard();\n    });\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    console.log(\"SAVE:\", currentTable, formData);\n    setModalOpen(false);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"loading\",\n    children: \"Loading Dashboard...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats\",\n      children: Object.entries(stats).map(([k, v]) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: k\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: v\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)]\n      }, k, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), Object.entries(latest).map(([table, rows]) => /*#__PURE__*/_jsxDEV(DashboardTable, {\n      title: table,\n      rows: rows,\n      onAdd: () => handleAdd(table),\n      onEdit: item => handleEdit(table, item),\n      onDelete: id => handleDelete(table, id)\n    }, table, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(ConfirmModal, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CrudModal, {\n      open: modalOpen,\n      title: `${formData.id ? \"Edit\" : \"Add\"} ${currentTable}`,\n      formData: formData,\n      onChange: e => setFormData({\n        ...formData,\n        [e.target.name]: e.target.value\n      }),\n      onSubmit: handleSubmit,\n      onClose: () => setModalOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"Iq8eaPXiR7wfcg52eGEXU2vxZKw=\", false, function () {\n  return [useConfirm];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["useEffect","useState","useCallback","getAdminDashboard","deleteEntity","useConfirm","CrudModal","DashboardTable","Navbar","jsxDEV","_jsxDEV","EMPTY","users","categories","products","customers","orders","employees","sales","reservations","Dashboard","_s","loading","setLoading","stats","setStats","latest","setLatest","modalOpen","setModalOpen","currentTable","setCurrentTable","formData","setFormData","confirm","ConfirmModal","fetchDashboard","_data$latest","_data$latest2","_data$latest3","_data$latest4","_data$latest5","_data$latest6","_data$latest7","_data$latest8","res","data","statistics","e","console","error","handleAdd","table","handleEdit","item","handleDelete","id","handleSubmit","preventDefault","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","map","k","v","rows","title","onAdd","onEdit","onDelete","open","onChange","target","name","value","onSubmit","onClose","_c","$RefreshReg$"],"sources":["D:/Programming/Full Stack Web/Front-End/React Projects/Caffeine Cove/Caffeine Cove/src/pages/admin/Dashboard.jsx"],"sourcesContent":["// src/pages/admin/Dashboard.jsx\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { getAdminDashboard, deleteEntity } from \"../../services/adminApi\";\r\nimport { useConfirm } from \"../../hooks/useConfirm\";\r\nimport CrudModal from \"../../components/admin/CrudModal\";\r\nimport DashboardTable from \"../../components/admin/DashboardTable\";\r\nimport \"../../styles/dashboard.css\";\r\nimport Navbar from \"../../Home/Navbar\";\r\n\r\nconst EMPTY = {\r\n  users: [],\r\n  categories: [],\r\n  products: [],\r\n  customers: [],\r\n  orders: [],\r\n  employees: [],\r\n  sales: [],\r\n  reservations: [],\r\n};\r\n\r\nconst Dashboard = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [stats, setStats] = useState({});\r\n  const [latest, setLatest] = useState(EMPTY);\r\n\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [currentTable, setCurrentTable] = useState(\"\");\r\n  const [formData, setFormData] = useState({});\r\n\r\n  const { confirm, ConfirmModal } = useConfirm();\r\n\r\n  // ================= FETCH =================\r\n  const fetchDashboard = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await getAdminDashboard();\r\n      const data = res.data || {};\r\n\r\n      setStats(data.statistics || {});\r\n      setLatest({\r\n        users: data.latest?.users || [],\r\n        categories: data.latest?.categories || [],\r\n        products: data.latest?.products || [],\r\n        customers: data.latest?.customers || [],\r\n        orders: data.latest?.orders || [],\r\n        employees: data.latest?.employees || [],\r\n        sales: data.latest?.sales || [],\r\n        reservations: data.latest?.reservations || [],\r\n      });\r\n    } catch (e) {\r\n      console.error(e);\r\n      setLatest(EMPTY);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchDashboard();\r\n  }, [fetchDashboard]);\r\n\r\n  // ================= CRUD =================\r\n  const handleAdd = (table) => {\r\n    setCurrentTable(table);\r\n    setFormData({});\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleEdit = (table, item) => {\r\n    setCurrentTable(table);\r\n    setFormData(item);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleDelete = async (table, id) => {\r\n    await confirm(async () => {\r\n      await deleteEntity(table, id);\r\n      fetchDashboard();\r\n    });\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"SAVE:\", currentTable, formData);\r\n    setModalOpen(false);\r\n  };\r\n\r\n  if (loading) return <h2 className=\"loading\">Loading Dashboard...</h2>;\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <h1>Admin Dashboard</h1>\r\n\r\n      {/* ===== STATS ===== */}\r\n      <div className=\"stats\">\r\n        {Object.entries(stats).map(([k, v]) => (\r\n          <div key={k} className=\"stat-card\">\r\n            <h3>{k}</h3>\r\n            <p>{v}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ===== TABLES ===== */}\r\n      {Object.entries(latest).map(([table, rows]) => (\r\n        <DashboardTable\r\n          key={table}\r\n          title={table}\r\n          rows={rows}\r\n          onAdd={() => handleAdd(table)}\r\n          onEdit={(item) => handleEdit(table, item)}\r\n          onDelete={(id) => handleDelete(table, id)}\r\n        />\r\n      ))}\r\n\r\n      <ConfirmModal />\r\n\r\n      <CrudModal\r\n        open={modalOpen}\r\n        title={`${formData.id ? \"Edit\" : \"Add\"} ${currentTable}`}\r\n        formData={formData}\r\n        onChange={(e) =>\r\n          setFormData({ ...formData, [e.target.name]: e.target.value })\r\n        }\r\n        onSubmit={handleSubmit}\r\n        onClose={() => setModalOpen(false)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}